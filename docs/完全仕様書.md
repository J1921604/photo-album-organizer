# ãƒ•ã‚©ãƒˆã‚¢ãƒ«ãƒãƒ ã‚ªãƒ¼ã‚¬ãƒŠã‚¤ã‚¶ãƒ¼ å®Œå…¨ä»•æ§˜æ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ãƒ•ã‚©ãƒˆã‚¢ãƒ«ãƒãƒ ã‚ªãƒ¼ã‚¬ãƒŠã‚¤ã‚¶ãƒ¼
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… æœ¬ç•ªå¯¾å¿œå¯èƒ½  
**æœ€çµ‚æ›´æ–°**: 2025-11-18

---

## ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼](#ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼)
4. [æ©Ÿèƒ½ä»•æ§˜](#æ©Ÿèƒ½ä»•æ§˜)
5. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
6. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
7. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹)
8. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
9. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ](#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ)
10. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## æ¦‚è¦

### ãƒ“ã‚¸ãƒ§ãƒ³

ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å†…ã®å†™çœŸã‚’æ’®å½±æ—¥æ™‚ã«åŸºã¥ã„ã¦è‡ªå‹•çš„ã«æ—¥ä»˜åˆ¥ã‚¢ãƒ«ãƒãƒ ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€æ—¥ä»˜ãƒ»ã‚¢ãƒ«ãƒãƒ åã§ã‚½ãƒ¼ãƒˆã€ã‚¿ã‚¤ãƒ«çŠ¶ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã€ãƒ•ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤ºãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹å®Œå…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ SPAã€‚

**âš ï¸ é‡è¦**: 
- ã‚¢ãƒ«ãƒãƒ ã®ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ä¸¦ã³æ›¿ãˆæ©Ÿèƒ½ã¯**ç„¡åŠ¹åŒ–**ã•ã‚Œã¦ã„ã¾ã™
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã®ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã‚‚**ç„¡åŠ¹åŒ–**ã•ã‚Œã¦ã„ã¾ã™ï¼ˆsrc/main.js 250-258è¡Œå‚ç…§ï¼‰
- ä»£ã‚ã‚Šã«**ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½**ï¼ˆæ—¥ä»˜/åå‰ã€æ˜‡é †/é™é †ï¼‰ã¨**ã€Œå†™çœŸã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³**ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™

### é‡è¦ãªç‰¹æ€§

- **ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹**: å¤–éƒ¨ API ãªã—ã€å®Œå…¨ãƒ–ãƒ©ã‚¦ã‚¶å´å®Ÿè¡Œ
- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ**: å†™çœŸã¯ä¸€åº¦ã‚‚ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„
- **æ°¸ç¶šçš„**: localStorage + SQL.js ã§å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜
- **é«˜é€Ÿ**: UI å¿œç­”æ™‚é–“ â‰¤1 ç§’ã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ â‰¤200MB
- **å®‰å…¨**: ãƒ•ã‚¡ã‚¤ãƒ«å‹æ¤œè¨¼ã€XSS å¯¾ç­–ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿è­·

### ã‚¹ã‚³ãƒ¼ãƒ—

```mermaid
graph TB
    subgraph "Include âœ…"
        A["å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰<br/>(JPEG/PNG/WebP)"]
        B["æ—¥ä»˜åˆ¥è‡ªå‹•ã‚°ãƒ«ãƒ¼ãƒ—åŒ–"]
        C["ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½<br/>(æ—¥ä»˜/åå‰)"]
        D["ã‚¿ã‚¤ãƒ«è¡¨ç¤ºãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"]
        E["ãƒ•ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤º"]
        F["ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½"]
        G["localhost/GitHub Pages"]
    end
  
    subgraph "Out of Scope âŒ"
        H["ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸ"]
        I["ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼"]
        J["ãƒãƒ«ãƒãƒ‡ãƒã‚¤ã‚¹å…±æœ‰"]
        K["AI è‡ªå‹•ã‚¿ã‚°ä»˜ã‘"]
        L["å¤–éƒ¨ API é€£æº"]
    end
  
    style A fill:#c8e6c9
    style B fill:#c8e6c9
    style C fill:#c8e6c9
    style D fill:#c8e6c9
    style E fill:#c8e6c9
    style F fill:#c8e6c9
    style G fill:#c8e6c9
    style H fill:#ffccbc
    style I fill:#ffccbc
    style J fill:#ffccbc
    style K fill:#ffccbc
    style L fill:#ffccbc
```

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆ

```mermaid
graph LR
    subgraph "ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼‰"
        UI["UI Layer<br/>HTML/CSS/JS"]
        LOGIC["Business Logic<br/>AlbumService<br/>DatabaseService"]
        STORAGE["Storage Layer<br/>SQL.js<br/>localStorage<br/>FileAPI"]
        UTILS["Utils<br/>dateUtils<br/>fileValidation<br/>logger"]
    end
  
    subgraph "å¤–éƒ¨"
        USER["ãƒ¦ãƒ¼ã‚¶ãƒ¼"]
        FS["ãƒ­ãƒ¼ã‚«ãƒ«<br/>ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ "]
    end
  
    USER -->|ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰| UI
    UI --> LOGIC
    LOGIC --> STORAGE
    STORAGE --> UTILS
    FS -->|File API| UI
  
    style UI fill:#e3f2fd
    style LOGIC fill:#fff3e0
    style STORAGE fill:#c8e6c9
    style UTILS fill:#f8bbd0
    style USER fill:#c5cae9
    style FS fill:#c5cae9
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼è²¬å‹™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼                 | è²¬å‹™                                    | ãƒ•ã‚¡ã‚¤ãƒ«                                                  |
| ------------------------ | --------------------------------------- | --------------------------------------------------------- |
| **UI**             | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°  | `src/main.js`, `src/index.html`, `src/styles/*.css` |
| **Business Logic** | ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã€ã‚½ãƒ¼ãƒˆã€çŠ¶æ…‹ç®¡ç†          | `src/services/AlbumService.js`                          |
| **Storage**        | DB åˆæœŸåŒ–ã€CRUDã€æ°¸ç¶šåŒ–                 | `src/services/DatabaseService.js`                       |
| **File Handling**  | ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼ã€validationã€metadata æŠ½å‡º | `src/services/StorageService.js`                        |
| **Utils**          | æ—¥ä»˜å‡¦ç†ã€validationã€logging           | `src/utils/*.js`                                        |

---

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

### US1: æ—¥ä»˜åˆ¥ã‚¢ãƒ«ãƒãƒ ã§å†™çœŸã‚’æ•´ç†ï¼ˆMVPï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã€
ãƒ­ãƒ¼ã‚«ãƒ«ã®å†™çœŸãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰è¤‡æ•°ã®å†™çœŸã‚’é¸æŠã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸã„ã€
ãã†ã™ã‚Œã°ã€æ’®å½±æ—¥ã”ã¨ã«è‡ªå‹•çš„ã«ã‚¢ãƒ«ãƒãƒ ã«åˆ†é¡ã•ã‚Œã€
æ—¥ä»˜ã¾ãŸã¯ã‚¢ãƒ«ãƒãƒ åã§ã‚½ãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

å—ã‘å…¥ã‚ŒåŸºæº–:
âœ… å†™çœŸã‚’è¤‡æ•°é¸æŠå¯èƒ½
âœ… æ—¥ä»˜åˆ¥ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãŒè‡ªå‹•å®Ÿè¡Œ
âœ… ã‚¢ãƒ«ãƒãƒ ã‚’æ—¥ä»˜ãƒ»åå‰ã§ã‚½ãƒ¼ãƒˆå¯èƒ½ï¼ˆæ˜‡é †/é™é †ï¼‰
âœ… ã‚½ãƒ¼ãƒˆçŠ¶æ…‹ãŒãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã‚‚ä¿æŒã•ã‚Œã‚‹
âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ãƒ•ã‚¡ã‚¤ãƒ«å‹æ¤œè¨¼ã€XSS å¯¾ç­–å®Ÿè£…
âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ â‰¤1ç§’ã€UI ãƒ–ãƒ­ãƒƒã‚¯æ™‚é–“ â‰¤100ms
```

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼**:

```mermaid
graph TD
    A["ğŸ“ å†™çœŸé¸æŠ<br/>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°"] -->|é¸æŠ| B["âœ“ Validation<br/>ãƒ•ã‚¡ã‚¤ãƒ«å‹ãƒ»ã‚µã‚¤ã‚º"]
    B -->|OK| C["ğŸ” MetadataæŠ½å‡º<br/>EXIF DateTime"]
    C -->|æ—¥ä»˜æŠ½å‡º| D["ğŸ’¾ DBä¿å­˜<br/>SQL.js"]
    D -->|ã‚°ãƒ«ãƒ¼ãƒ—åŒ–| E["ğŸ¨ UIæ›´æ–°<br/>ã‚¢ãƒ«ãƒãƒ ã‚«ãƒ¼ãƒ‰"]
    E -->|ã‚½ãƒ¼ãƒˆé¸æŠ| F["ğŸ”„ é †åºæ›´æ–°<br/>localStorageä¿å­˜"]
    F --> G["âœ… å®Œäº†<br/>ã‚¢ãƒ«ãƒãƒ æ•´ç†å®Œäº†"]
  
    B -->|NG| H["âš ï¸ ã‚¨ãƒ©ãƒ¼è¡¨ç¤º"]
  
    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#fff3e0
    style D fill:#c8e6c9
    style E fill:#c8e6c9
    style F fill:#f8bbd0
    style G fill:#c5cae9
    style H fill:#ffccbc
```

### US2: ã‚¿ã‚¤ãƒ«çŠ¶ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã€
å„ã‚¢ãƒ«ãƒãƒ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã„ã€
ãã†ã™ã‚Œã°ã€å†™çœŸãŒã‚¿ã‚¤ãƒ«çŠ¶ã‚°ãƒªãƒƒãƒ‰ï¼ˆ3x4ï¼‰ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚

å—ã‘å…¥ã‚ŒåŸºæº–:
âœ… ã‚¢ãƒ«ãƒãƒ ã‚¯ãƒªãƒƒã‚¯ â†’ ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆ
âœ… 3x4 ã‚¿ã‚¤ãƒ«è¡¨ç¤ºï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰
âœ… è¡¨ç¤ºé€Ÿåº¦ â‰¤1ç§’
âœ… 1000+ å†™çœŸã§ã‚‚ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« FPS 55+
```

### US3: ãƒ•ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤ºã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã€
ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã„ã€
ãã†ã™ã‚Œã°ã€ãƒ•ãƒ«ã‚µã‚¤ã‚ºãŒãƒ¢ãƒ¼ãƒ€ãƒ«ã«è¡¨ç¤ºã•ã‚Œã€
ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã§ãã‚‹ã€‚

å—ã‘å…¥ã‚ŒåŸºæº–:
âœ… ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º â‰¤1ç§’
âœ… ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‹•ä½œ â‰¤2ç§’
âœ… UI ãƒ–ãƒ­ãƒƒã‚¯æ™‚é–“ â‰¤100ms
âœ… ESC ã‚­ãƒ¼å¯¾å¿œ
```

---

## æ©Ÿèƒ½ä»•æ§˜

### 1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

#### æ©Ÿèƒ½è©³ç´°

| é …ç›®                     | ä»•æ§˜                                  |
| ------------------------ | ------------------------------------- |
| **å¯¾å¿œå½¢å¼**       | JPEG, PNG, WebP                       |
| **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º** | 100B ï½ 50MB                          |
| **å…¥åŠ›æ–¹å¼**       | ã€Œå†™çœŸã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚° |
| **è¤‡æ•°é¸æŠ**       | âœ… å¯¾å¿œï¼ˆåŒæ™‚ã«è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ï¼‰     |
| **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º** | EXIF DateTime â†’ YYYY-MM-DD ã«æ­£è¦åŒ–  |
| **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—** | âŒ ç„¡åŠ¹åŒ–ï¼ˆè­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼‰ |

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
1. ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ â†’ 2. Validation â†’ 3. MetadataæŠ½å‡º 
â†’ 4. Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ â†’ 5. DBä¿å­˜ 
â†’ 6. ã‚°ãƒ«ãƒ¼ãƒ—åŒ– â†’ 7. UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```javascript
// src/utils/fileValidation.js
validateFile(file) â†’ {
  if (!isSupportedMimeType(file.type)) 
    throw ERR_INVALID_MIME_TYPE
  if (file.size < 100 || file.size > 50MB) 
    throw ERR_INVALID_FILE_SIZE
  return { valid: true }
}
```

### 2. æ—¥ä»˜åˆ¥ã‚°ãƒ«ãƒ¼ãƒ—åŒ–

```
å…¥åŠ›: Photo[] = [
  { photo_date: "2025-11-15", file_name: "a.jpg" },
  { photo_date: "2025-11-15", file_name: "b.jpg" },
  { photo_date: "2025-11-14", file_name: "c.jpg" }
]

å‡¦ç†: groupPhotosByDate()

å‡ºåŠ›: Album[] = [
  { 
    album_date: "2025-11-15",
    photos: [a.jpg, b.jpg],
    display_order: 0
  },
  { 
    album_date: "2025-11-14",
    photos: [c.jpg],
    display_order: 1
  }
]
```

### 3. ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½

**å®Ÿè£…ãƒ•ãƒ­ãƒ¼**:

```mermaid
graph TD
    A["ã‚½ãƒ¼ãƒˆé¸æŠ<br/>æ—¥ä»˜/åå‰"] --> B["ã‚½ãƒ¼ãƒˆé †é¸æŠ<br/>æ˜‡é †/é™é †"]
    B --> C["sortAlbums()<br/>ã‚¢ãƒ«ãƒãƒ é…åˆ—ä¸¦ã³æ›¿ãˆ"]
    C --> D["localStorageä¿å­˜<br/>ã‚½ãƒ¼ãƒˆè¨­å®šæ°¸ç¶šåŒ–"]
    D --> E["renderAlbums()"]
    E --> F["UIæ›´æ–°<br/>æ–°é †åºè¡¨ç¤º"]
  
    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#c8e6c9
    style D fill:#f8bbd0
    style E fill:#f8bbd0
    style F fill:#c5cae9
```

**å®Ÿè£…ã‚³ãƒ¼ãƒ‰**:

```javascript
// ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
function sortAlbums(albums, sortBy, sortOrder) {
  const sorted = [...albums].sort((a, b) => {
    let compareValue = 0
    
    if (sortBy === 'date') {
      compareValue = a.album_date.localeCompare(b.album_date)
    } else if (sortBy === 'title') {
      const titleA = a.album_title || a.album_date
      const titleB = b.album_title || b.album_date
      compareValue = titleA.localeCompare(titleB)
    }
    
    return sortOrder === 'asc' ? compareValue : -compareValue
  })
  
  // localStorage ã«ä¿å­˜
  localStorage.setItem('sortBy', sortBy)
  localStorage.setItem('sortOrder', sortOrder)
  
  return sorted
}
```

### 4. ã‚¿ã‚¤ãƒ«è¡¨ç¤ºï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰

| ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ  | åˆ—æ•° | è¡Œã®é«˜ã• |
| ----------------- | ---- | -------- |
| Desktop 1200px+   | 4    | æ­£æ–¹å½¢   |
| Tablet 768px      | 3    | æ­£æ–¹å½¢   |
| Mobile 480px      | 2    | æ­£æ–¹å½¢   |
| Ultra-small 240px | 1    | æ­£æ–¹å½¢   |

**CSS**:

```css
/* src/styles/components.css */
.tile-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  aspect-ratio: 1/1;
  gap: 8px;
}

@media (max-width: 480px) {
  .tile-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
```

### 5. ãƒ•ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤ºãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```javascript
// ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Ÿè£…
downloadPhoto(photo) {
  // 1. data URI ã‚’ Blob ã«å¤‰æ›
  const blob = dataURItoBlob(photo.data_uri)
  
  // 2. Blob URL ç”Ÿæˆ
  const url = URL.createObjectURL(blob)
  
  // 3. å‹•çš„ãƒªãƒ³ã‚¯ä½œæˆ
  const a = document.createElement('a')
  a.href = url
  a.download = photo.file_name
  
  // 4. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ ãƒˆãƒªã‚¬ãƒ¼
  a.click()
  
  // 5. ãƒ¡ãƒ¢ãƒªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  URL.revokeObjectURL(url)
}
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆSQL.jsï¼‰

```sql
-- Photos ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆDBãƒãƒ¼ã‚¸ãƒ§ãƒ³9ï¼‰
CREATE TABLE photos (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  file_name TEXT NOT NULL,
  file_size INTEGER NOT NULL,
  photo_date TEXT NOT NULL,           -- YYYY-MM-DD (æ—¥ä»˜ã®ã¿)
  preview_uri TEXT,                    -- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒ (Data URI)
  storage_key TEXT,                    -- IndexedDB ãƒã‚¤ãƒŠãƒªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼
  mime_type TEXT,                      -- 'image/jpeg', 'image/png', 'image/webp'
  album_id INTEGER,                    -- æ‰€å±ã‚¢ãƒ«ãƒãƒ IDï¼ˆNULLå¯ï¼‰
  created_at TEXT DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (album_id) REFERENCES albums(id) ON DELETE SET NULL
);

-- Albums ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆDBãƒãƒ¼ã‚¸ãƒ§ãƒ³9ï¼‰
CREATE TABLE albums (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  album_date TEXT NOT NULL,           -- YYYY-MM-DD
  display_order INTEGER NOT NULL,
  album_title TEXT NOT NULL DEFAULT '', -- ã‚¢ãƒ«ãƒãƒ åï¼ˆç©ºæ–‡å­—å¯ï¼‰
  thumbnail_uri TEXT,                  -- ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒ (Data URI)
  created_at TEXT DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(album_date, album_title)     -- è¤‡åˆã‚­ãƒ¼: åŒã˜æ—¥ä»˜ã«ç•°ãªã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¢ãƒ«ãƒãƒ ã‚’è¨±å¯
);

-- Metadata ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ç”¨ï¼‰
CREATE TABLE metadata (
  key TEXT PRIMARY KEY,
  value TEXT NOT NULL
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_photos_date ON photos(photo_date);
CREATE INDEX idx_photos_storage_key ON photos(storage_key);
CREATE INDEX idx_albums_order ON albums(display_order);
```

### ä¸»ãªè¨­è¨ˆå¤‰æ›´ç‚¹ï¼ˆv9ï¼‰

1. **è¤‡åˆã‚­ãƒ¼å°å…¥**: `UNIQUE(album_date, album_title)` ã«ã‚ˆã‚Šã€åŒã˜æ—¥ä»˜ã«ç•°ãªã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¢ãƒ«ãƒãƒ ã‚’è¤‡æ•°ä½œæˆå¯èƒ½
2. **album_idåŸºç›¤**: å†™çœŸã¯ `album_id` ã§æ‰€å±ã‚¢ãƒ«ãƒãƒ ã‚’ç®¡ç†ï¼ˆæ—¥ä»˜ã§ã¯ãªãï¼‰
3. **ãƒã‚¤ãƒŠãƒªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸åˆ†é›¢**: `storage_key` ã«ã‚ˆã‚ŠIndexedDBã«å†™çœŸã‚’ä¿å­˜ã€Data URIã¯ `preview_uri` ã®ã¿
4. **ãƒ¬ã‚¬ã‚·ãƒ¼ã‚¹ã‚­ãƒ¼ãƒè‡ªå‹•ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: `data_uri`, `date`, å˜ä¸€ `album_date UNIQUE` ã‹ã‚‰è‡ªå‹•ç§»è¡Œ

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®šç¾©

#### Photo

```javascript
{
  id: 1,
  file_name: "photo.jpg",
  file_size: 2457600,
  photo_date: "2025-11-15",
  photo_time: "14:30:45",
  mime_type: "image/jpeg",
  data_uri: "data:image/jpeg;base64,...",
  checksum: "a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4",
  exif_data: {
    Make: "Apple",
    Model: "iPhone 14",
    DateTime: "2025:11:15 14:30:45"
  },
  created_at: "2025-11-16 09:30:00",
  album_id: 10,
  display_order: 3
}
```

#### Album

```javascript
{
  id: 10,
  album_date: "2025-11-15",
  album_title: "äº¬éƒ½æ—…è¡Œ",
  display_order: 2,
  photo_count: 42,
  thumbnail_uri: "data:image/jpeg;base64,...",
  created_at: "2025-11-16 09:30:00",
  updated_at: "2025-11-16 10:15:00"
}
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### åŸå‰‡ II: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å„ªå…ˆ

#### 1. å…¥åŠ›æ¤œè¨¼ï¼ˆSEC-001ï¼‰

```javascript
// ãƒ•ã‚¡ã‚¤ãƒ«å‹æ¤œè¨¼
validateFile(file) {
  const allowedMimes = ['image/jpeg', 'image/png', 'image/webp']
  if (!allowedMimes.includes(file.type)) {
    throw new Error('ERR_INVALID_MIME_TYPE')
  }
}

// ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºæ¤œè¨¼
if (file.size < 100 || file.size > 50 * 1024 * 1024) {
  throw new Error('ERR_INVALID_FILE_SIZE')
}
```

#### 2. å‡ºåŠ›ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆSEC-002ï¼‰

```javascript
// XSS å¯¾ç­–
function escapeHtml(text) {
  if (!text) return ''
  const div = document.createElement('div')
  div.textContent = text  // textContent ã¯å®‰å…¨
  return div.innerHTML
}

// ä½¿ç”¨ä¾‹
const safeName = escapeHtml(photo.file_name)
element.innerHTML = `<p>${safeName}</p>`
```

#### 3. ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿è­·ï¼ˆSEC-003ï¼‰

âœ… **ä¿è­·å¯¾è±¡**:

- EXIF GPS åº§æ¨™ï¼ˆå€‹äººã®ä½ç½®æƒ…å ±ï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ—¥æ™‚ï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ï¼‰
- ã‚«ãƒ¡ãƒ©ãƒ¢ãƒ‡ãƒ«æƒ…å ±

âœ… **å®Ÿè£…**:

- EXIF ãƒ‡ãƒ¼ã‚¿ã¯ DB ã«ä¿å­˜ä½†ã— UI ã«è¡¨ç¤ºã—ãªã„
- data URI ã¯ base64 encode ã§èª­ã¿å–ã‚Šå›°é›£ã«
- localStorage ã¯ privateï¼ˆã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ï¼‰

#### 4. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆSEC-004ï¼‰

âŒ **å±é™º**: `"å†™çœŸ 123.jpg ã® EXIF DateTime ãŒç„¡åŠ¹ã§ã™"`
âœ… **å®‰å…¨**: `"å†™çœŸ ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ"`

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### åŸå‰‡ III: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å®šé‡åŒ–

#### ç›®æ¨™å€¤ï¼ˆé”æˆçŠ¶æ³ï¼‰

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹           | ç›®æ¨™    | å®Ÿç¸¾                          | çŠ¶æ…‹    |
| -------------------- | ------- | ----------------------------- | ------- |
| ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | â‰¤1ç§’   | ~100ms                        | âœ… PASS |
| ã‚°ãƒ«ãƒ¼ãƒ—åŒ–å‡¦ç†       | â‰¤1ç§’   | ~50ms                         | âœ… PASS |
| UI ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°      | â‰¤1ç§’   | ~200ms                        | âœ… PASS |
| ã‚½ãƒ¼ãƒˆå‡¦ç†           | â‰¤1ç§’   | ~150ms                        | âœ… PASS |
| ã‚¿ã‚¤ãƒ«è¡¨ç¤º           | â‰¤1ç§’   | ~250ms                        | âœ… PASS |
| ãƒ•ãƒ«ã‚µã‚¤ã‚ºè¡¨ç¤º       | â‰¤1ç§’   | ~300ms                        | âœ… PASS |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡         | â‰¤200MB | ~80MBï¼ˆ10 Album Ã— 10 Photoï¼‰ | âœ… PASS |
| ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º       | â‰¤300KB | ~63KBï¼ˆjs + cssï¼‰             | âœ… PASS |

#### ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åˆ†æ

```mermaid
graph TB
    subgraph "å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—"
        A["ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼<br/>~10ms"]
        B["Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰<br/>~30ms"]
        C["EXIFæŠ½å‡º<br/>~20ms"]
        D["DBæŒ¿å…¥<br/>~50ms"]
        E["ã‚°ãƒ«ãƒ¼ãƒ—åŒ–<br/>~40ms"]
        F["UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°<br/>~100ms"]
    end
  
    A --> B --> C --> D --> E --> F
  
    style F fill:#ffeb3b
    style D fill:#fff3e0
    style B fill:#fff3e0
```

**æœ€é©åŒ–æ¸ˆã¿**:

- âœ… Base64 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’ async ã§å®Ÿè¡Œ
- âœ… SQL.js ã‚¯ã‚¨ãƒªã‚’æœ€å°åŒ–
- âœ… DOM æ›´æ–°ã‚’ãƒãƒƒãƒåŒ–

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

```
âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ: 12+13+9+2+4+2 = 42 tests
âœ… ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãƒ†ã‚¹ãƒˆ: 15 tests
âœ… çµ±åˆãƒ†ã‚¹ãƒˆ: 8+10+2 = 20 tests

åˆè¨ˆ: 77 PASS âœ… (100% æˆåŠŸç‡)
ã‚«ãƒãƒ¬ãƒƒã‚¸: > 85%
```

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ dateUtils.test.js (12)         - æ—¥ä»˜è§£æãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚   â”œâ”€â”€ fileValidation.test.js (13)    - ãƒ•ã‚¡ã‚¤ãƒ«å‹ãƒ»ã‚µã‚¤ã‚ºæ¤œè¨¼
â”‚   â”œâ”€â”€ AlbumService.test.js (9)       - ã‚¢ãƒ«ãƒãƒ ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãƒ»å–å¾—
â”‚   â”œâ”€â”€ AlbumRename.test.js (2)        - åŒæ—¥ä»˜ç‹¬ç«‹ã‚¢ãƒ«ãƒãƒ åå¤‰æ›´
â”‚   â”œâ”€â”€ SameDateAlbum.test.js (4)      - åŒæ—¥ä»˜è¤‡æ•°ã‚¢ãƒ«ãƒãƒ ä½œæˆ
â”‚   â””â”€â”€ ThumbnailFix.test.js (2)       - album_idåŸºç›¤ã‚µãƒ ãƒã‚¤ãƒ«åˆ†é›¢
â”œâ”€â”€ contract/
â”‚   â””â”€â”€ DatabaseService.contract.test.js (15) - APIå¥‘ç´„ãƒ†ã‚¹ãƒˆ
â””â”€â”€ integration/
    â”œâ”€â”€ PhotoUploadIntegration.test.js (8)  - å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰çµ±åˆ
    â”œâ”€â”€ DragDropIntegration.test.js (10)    - ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½çµ±åˆ
    â””â”€â”€ DatabaseMigration.test.js (2)       - ãƒ¬ã‚¬ã‚·ãƒ¼ã‚¹ã‚­ãƒ¼ãƒè‡ªå‹•ç§»è¡Œ
```

### æ–°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆè©³ç´°

#### SameDateAlbum.test.js (4ãƒ†ã‚¹ãƒˆ)
- âœ… åŒã˜æ—¥ä»˜ã«ç•°ãªã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¢ãƒ«ãƒãƒ ä½œæˆ
- âœ… æ—¢å­˜ã‚¢ãƒ«ãƒãƒ ã‚’ä¸Šæ›¸ãã›ãšç‹¬ç«‹ä¿æŒ
- âœ… åŒã˜æ—¥ä»˜+ã‚¿ã‚¤ãƒˆãƒ«ã®é‡è¤‡é˜²æ­¢
- âœ… album_id ã«ã‚ˆã‚‹å†™çœŸåˆ†é›¢ï¼ˆåŒã˜æ—¥ä»˜ã§ã‚‚æ··åœ¨ã—ãªã„ï¼‰

#### AlbumRename.test.js (2ãƒ†ã‚¹ãƒˆ)
- âœ… åŒã˜æ—¥ä»˜ã®è¤‡æ•°ã‚¢ãƒ«ãƒãƒ ã§1ã¤ã ã‘åå‰å¤‰æ›´
- âœ… ä¸¡æ–¹ã®ã‚¢ãƒ«ãƒãƒ ã‚’ç‹¬ç«‹ã—ã¦åå‰å¤‰æ›´

#### ThumbnailFix.test.js (2ãƒ†ã‚¹ãƒˆ)
- âœ… album_id æŒ‡å®šã§ã‚µãƒ ãƒã‚¤ãƒ«æ›´æ–°ï¼ˆåŒã˜æ—¥ä»˜ã®ä»–ã‚¢ãƒ«ãƒãƒ ã¯å½±éŸ¿ãªã—ï¼‰
- âœ… album_id ã«ã‚ˆã‚‹å†™çœŸè¿½åŠ ã®å®Œå…¨åˆ†é›¢

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ (77 tests)
npm run test

# ç‰¹å®šãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œ
npm run test -- tests/unit/SameDateAlbum.test.js

# UI ã§ç¢ºèª
npm run test:ui
```

### å®Ÿè¡Œçµæœ

```
âœ“ tests/contract/DatabaseService.contract.test.js (15)
âœ“ tests/unit/dateUtils.test.js (12)
âœ“ tests/unit/fileValidation.test.js (13)
âœ“ tests/unit/AlbumService.test.js (9)
âœ“ tests/unit/AlbumRename.test.js (2)
âœ“ tests/unit/SameDateAlbum.test.js (4)
âœ“ tests/unit/ThumbnailFix.test.js (2)
âœ“ tests/integration/PhotoUploadIntegration.test.js (8)
âœ“ tests/integration/DragDropIntegration.test.js (10)
âœ“ tests/integration/DatabaseMigration.test.js (2)

Test Files  10 passed (10)
     Tests  77 passed (77)
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•é–‹ã
# http://localhost:5173/photo-album-organizer/
```

### ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

```bash
# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèª
npm run preview
# http://localhost:4173/photo-album-organizer/
```

### GitHub Pages ãƒ‡ãƒ—ãƒ­ã‚¤

è©³ç´°ã¯ [`docs/DEPLOY_GUIDE.md`](./DEPLOY_GUIDE.md) ã‚’å‚ç…§ã€‚

**ç°¡æ˜“æ‰‹é †**:

```bash
# 1. main ãƒ–ãƒ©ãƒ³ãƒã¸ãƒ—ãƒƒã‚·ãƒ¥
git checkout main
git add .
git commit -m "Deploy: Update"
git push origin main

# 2. GitHub Actions è‡ªå‹•å®Ÿè¡Œ
# Actions ã‚¿ãƒ–ã§é€²æ—ç¢ºèª
# https://github.com/J1921604/photo-album-organizer/actions

# 3. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼ˆ2-4åˆ†å¾Œï¼‰
# https://j1921604.github.io/photo-album-organizer/
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ 1: EXIF DateTime ãŒæŠ½å‡ºã§ããªã„

**åŸå› **: ãƒ•ã‚¡ã‚¤ãƒ«ã« EXIF ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**:

```javascript
// src/services/DatabaseService.js
const fallbackDate = new Date(file.lastModified).toISOString().split('T')[0]
```

### å•é¡Œ 2: localStorage ãŒæº€æ¯ã§ä¿å­˜ã§ããªã„

**åŸå› **: å¤§é‡ã®é«˜è§£åƒåº¦ç”»åƒã§ 5-10MB è¶…é

**è§£æ±ºç­–**:

- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒã‚µã‚¤ã‚ºã‚’ç¸®å°ï¼ˆ480px Ã— 480pxï¼‰
- å¤ã„ã‚¢ãƒ«ãƒãƒ ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»å‰Šé™¤

### å•é¡Œ 3: GitHub Pages ã«åæ˜ ã•ã‚Œãªã„

**åŸå› **: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¤ã„

**è§£æ±ºç­–**:

```
Ctrl+Shift+Delete ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‰Šé™¤
or
ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ã
```

### å•é¡Œ 4: ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ãŒå‹•ä½œã—ãªã„

**åŸå› **: localStorageã®ã‚½ãƒ¼ãƒˆè¨­å®šãŒç ´æ

**è§£æ±ºç­–**:

```javascript
// ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
localStorage.removeItem('sortBy')
localStorage.removeItem('sortOrder')
location.reload()
```

---

## API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### DatabaseService

```javascript
// åˆæœŸåŒ–
await initDatabase()

// å†™çœŸè¿½åŠ 
const photoId = await addPhoto(file, exifData)

// æ—¥ä»˜åˆ¥å–å¾—
const photos = await getPhotosByDate(date)

// ã‚¢ãƒ«ãƒãƒ ä½œæˆ
const albumId = await createOrUpdateAlbum(date, title)

// ä¸¦ã³æ›¿ãˆæ›´æ–°
await updateAlbumOrder(albumIds)

// DBä¿å­˜
await saveDatabase()
```

### AlbumService

```javascript
// ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
const groupedPhotos = groupPhotosByDate(photos)

// å…¨ã‚¢ãƒ«ãƒãƒ å–å¾—
const albums = getAllAlbums()

// é †åºæ›´æ–°
await updateAlbumOrder(albumIds)

// æ‰‹å‹•ã‚¢ãƒ«ãƒãƒ ä½œæˆ
await createManualAlbum(date, title)
```
